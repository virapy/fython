# fython


برای پوشش دقیق مواردی که اشاره کردید، باید ساختار `CodeMirror.defineSimpleMode` را تغییر دهیم تا همه این دسته‌بندی‌ها را شامل شود. در کد زیر:  

- **کلمات کلیدی** (`keyword`) مانند `برای`, `اگر`, `وگرنه`, `بازده` و ...  
- **توابع داخلی** (`built-in`) مانند `چاپ`, `دامنه`, `گرد`, `مجموعه` و ...  
- **مقادیر ثابت (لیترال)** (`literal`) مانند `درست`, `نادرست`, `هیچ` و ...  
- **انواع داده** (`type`) مانند `رشته`, `تاپل`, `مجموعه`, `لیست` و ...  

را به درستی شناسایی کرده‌ایم.  

---

### **کد کامل و اصلاح‌شده:**
```html
<script>
    CodeMirror.defineSimpleMode("farsi-python", {
        start: [
            // کلمات کلیدی فارسی
            { regex: /(?:^|[\s\(\){}:])(و|همچون|تایید|ناهمگام|منتظر|شکستن|حالت|کلاس|ادامه|تعریف|حذف|دیگر|وگرنه|استثنا|درنهایت|برای|از|سراسری|اگر|وارد|در|هست|لاندا|تطابق|نه|یا|عبور|دفع|بازگرداندن|تلاش|تا|با|بازده)(?=$|[\s\(\){}:])/u, token: "keyword" },

            // توابع داخلی (built-in)
            { regex: /(?:^|[\s\(\){}:])(ــ‌وارد‌ــ|قدرمطلق|همه|هر|خوانا|دوتایی|منطقی|شکست|آرایه|بایت|فراخوانی|کاراکتر|کلاسی|ترکیب|مختلط|حذف_ویژگی|دیکشنری|فهرست|تقسیم|شمارش|ارزیابی|اجرا|فیلتر|شناور|قالب|frozenset|دریافت|جهانی|hasattr|هش|کمک|هگزا|شناسه|ورودی|صحیح|نمونه|issubclass|تکرار|طول|لیست|محلی|نقشه|بیشینه|حافظه|کمینه|بعدی|شی|هشتایی|باز|ترتیب|توان|چاپ|ویژگی|دامنه|نمایش|معکوس|گرد|مجموعه|تنظیم|برش|مرتب|ایستا|رشته|جمع|ممتاز|تاپل|نوع|متغیرها|زیپ)(?=$|[\s\(\){}:])/u, token: "builtin" },

            // مقادیر ثابت (literal)
            { regex: /(?:^|[\s\(\){}:])(ــ‌دیباگ‌ــ|الیپس|نادرست|هیچ|اجراـ‌نشده|درست)(?=$|[\s\(\){}:])/u, token: "atom" },

            // انواع داده (type)
            { regex: /(?:^|[\s\(\){}:])(هر‌نوع|قابل‌ـ‌فراخوانی|روال|نوع‌ـ‌دیکشنری|نوع‌ـ‌لیست|نوع‌ـ‌اختیاری|نوع‌ـ‌عمومی|مقدار‌ـثابت|نوع‌ـ‌دنباله|نوع‌ـ‌مجموعه|نوع‌ـ‌تاپل|نوع|نوع‌ـ‌اجتماع)(?=$|[\s\(\){}:])/u, token: "type" },

            // متغیرها (حروف فارسی و انگلیسی)
            { regex: /[\p{L}_][\p{L}\p{N}_]*/u, token: "variable" },

            // اعداد فارسی و انگلیسی
            { regex: /[۰-۹0-9]+/, token: "number" },

            // رشته‌های داخل "" یا ''
            { regex: /"(?:\\.|[^\\"])*"/, token: "string" },
            { regex: /'(?:\\.|[^\\'])*'/, token: "string" },

            // کامنت‌ها که با # شروع می‌شوند
            { regex: /#.*/, token: "comment" }
        ]
    });
</script>
```

---

### **چرا این کد بهتر است؟**
✅ **پوشش دقیق تمام کلمات کلیدی، توابع داخلی، مقادیر ثابت و انواع داده**  
✅ **عدم شناسایی اشتباه متغیرها یا اعداد به‌عنوان کلمات کلیدی**  
✅ **پشتیبانی از اعداد فارسی (`۱۰`) و انگلیسی (`10`)**  
✅ **سازگاری با راست‌به‌چپ (`RTL`) و تشخیص دقیق مرزهای کلمات**  

---

### **رنگ‌بندی نهایی:**
| **دسته‌بندی**  | **مثال‌ها** | **رنگ** |
|---------------|------------|--------|
| **کلمات کلیدی (keyword)** | برای، اگر، وگرنه، بازده | **آبی** |
| **توابع داخلی (built-in)** | چاپ، دامنه، گرد، مجموعه | **بنفش** |
| **مقادیر ثابت (literal)** | درست، نادرست، هیچ | **سبز** |
| **انواع داده (type)** | رشته، لیست، تاپل | **نارنجی** |
| **اعداد (number)** | ۱۰، 20 | **قرمز** |
| **رشته‌ها (string)** | "سلام"، 'متن' | **سبز پررنگ** |
| **کامنت‌ها (comment)** | `# این یک کامنت است` | **خاکستری** |
